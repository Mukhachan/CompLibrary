{% extends 'base.html' %}

{% block content %}
{{ super() }}

<style>
table{
    margin: auto; 
    margin-bottom: 5px; 
    font-size: 14pt;
}
.header{
    font-weight:700;
}
.search{
    text-align: center;
    margin-top: 10px;
    margin-bottom: 10px;
    font-size: 14pt;
}
.flash{
    text-align: center;
    margin: auto;
    font-size: 14pt; 
    color: rgb(213, 213, 213);
    background: rgb(167, 10, 10); 
    border-radius: 10px;
    margin-bottom: 10px;
    width: 20%;
}
a{
    text-decoration: underline;
    color: rgb(213, 213, 213);
}
a:hover{
    color: rgb(167, 167, 167);
}
.btn-search{
    border-radius: 2px;
}
.btn-search:hover{
    box-shadow: 0px 0px 3px black;
}
.btn-edit:hover, .popup:hover{
    box-shadow: 0px 0px 3px black;
}
</style>


<script>
    // Когда пользователь нажимает на <div>, открыть popup
    function myFunction() {
        var popup = document.getElementById("myPopup");
        popup.classList.toggle("show");
    }
</script>

<form action="/booklist" method="post">
    <div class="search">
        Введите запрос:   
        <input name="search_btn" type="text" placeholder="введите фильтр" id="search">
        <button class='btn-search' type="submit">поиск</button>
    </div>
</form>

{% for cat, msg in get_flashed_messages(True) %}
<div class="flash {{cat}}" style="text-align: center; margin: auto; font-size: 14pt;  color: rgb(213, 213, 213);
background: rgb(167, 10, 10); border-radius: 10px; margin-bottom: 10px; width: 20%;">
    {{msg}}
    <a href="/booklist" >Показать все</a>
</div>
{% endfor %}

<table border="1px">
    <tr class="header">
        <td>Название</td>
        <td>Автор</td>
        <td>Год выпуска</td>
        <td>Кол-во</td>
        <td>Описание</td>
        <td>Дата/Время добавления</td>
    </tr>
{% for row in restrictions %}
    <tr>
        <td>{{row["btitle"]}}</td>
        <td>{{row["author"]}}</td>
        <td>{{row["year"]}}</td>
        <td>{{row["number"]}}</td>
        <td>{{row["descript"]}}</td>
        <td>{{row["dt_string"]}}</td>
        <td>
            <form action="/newbook" method="GET">
                <button class="btn-edit"name="edit" value='{{row["id"]}}'>✎</button>
            </form>
        </td>
        <td>
            <div class="popup" onclick="myFunction()"><button>✖</button>
                <span class="popuptext" id="myPopup">Вы уверены что хотите удалить?
                    <form action="/booklist" method="POST">
                        <button>Нет</button>
                        <button name="id" value='{{row["id"]}}'>Да</button>
                    </form>
                </span>
            </div>
        </td>
    </tr>
{% endfor %}
</table>




{% endblock %}